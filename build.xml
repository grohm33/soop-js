<project name="soop" default="production" basedir=".">
  <description>
    This will build a production version of soop.
  </description>

  <property name="src-dir" location="src"/>
  <property name="build-dir" location="build"/>
  <property name="src-file" location="${src-dir}/soop.js"/>
  <property name="build-file" location="${build-dir}/soop.js"/>

  <target name="init">
    <copy file="${src-file}" tofile="${build-file}" overwrite="true" />
  </target>

  <target name="remove-debug-code">
    <replaceregexp
      file="${build-file}"
      match="//\&lt;debug\&gt;.*?//\&lt;/debug\&gt;"
      flags="gis"
      replace=""
    />
  </target>

  <target name="minify">
    <exec executable="uglifyjs.cmd">
      <arg value="${build-file}"/>
      <arg value="-o"/>
      <arg value="${build-file}"/>
      <arg value="-c"/>
      <arg value="hoist_vars=true"/>
      <arg value="-m"/>
      <arg value="--screw-ie8"/>
    </exec>
  </target>

  <target name="production" depends="init,remove-debug-code,minify">
  </target>
</project>
